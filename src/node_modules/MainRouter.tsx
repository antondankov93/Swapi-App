import React from "react";
import {Route, Switch, useLocation} from 'react-router-dom'
import {useTransition, animated, config} from "react-spring";

import {MainPage} from "pages/main-page/MainPage";
import {WorldPage} from "pages/world-page/WorldPage";
import {UserAccountPage} from "pages/user-account-page/UserAccountPage";
import FilmsContainer from "components/films/FilmsContainer";
import PlanetsContainer from "components/planets/PlanetsContainer";
import StarshipsContainer from "components/starships/StarshipsContainer";
import CharactersContainer from "components/characters/CharactersContainer";
import {ChartsPage} from "pages/charts-page/ChartsPage";
import {QuizPage} from "pages/quiz-page/QuizPage";


export const MainRouter = () => {

    const location = useLocation()
    const transition = useTransition(location, loaction => location.pathname, {
        from: {opacity: 0, transform: 'translate(100%, 0)'},
        enter: {opacity: 1, transform: 'translate(0%, 0)'},
        leave: {opacity: 0, transform: 'translate(-100%, 0)'},
        config: config.stiff,
    })

    return (
        <>
            {transition.map(({item, props, key}) => (
                <animated.div key={key} style={props} >
                    <Switch location={item}>
                        <Route path='/' exact render={() => <MainPage/>}/>
                        <Route path='/world' exact render={() => <WorldPage/>}/>
                        <Route path='/charts' render={() => <ChartsPage/>}/>
                        <Route path='/quiz' render={() => <QuizPage/>}/>
                        <Route path='/account' render={() => <UserAccountPage/>}/>
                        <Route path='/world/characters' render={() => <CharactersContainer/>}/>
                        <Route path='/world/films' render={() => <FilmsContainer/>}/>
                        <Route path='/world/planets' render={() => <PlanetsContainer/>}/>
                        <Route path='/world/starships' render={() => <StarshipsContainer/>}/>
                    </Switch>
                </animated.div>
            ))
        }
        </>
    )
}