import {call, put, delay} from 'redux-saga/effects';
import {planetsApi} from "services/axios";
import {SagaIterator} from "@redux-saga/types";
import {allPlanetsSuccess, putAllPlanets} from "components/planets/planetsActions";


const fetchAllPlanets = () => {
    return planetsApi.getPlanetsList()
}

export function* fetchAllPlanetsWorker(): SagaIterator {

    const planetsList = yield call(fetchAllPlanets)
    yield put(putAllPlanets(planetsList.results))

    yield delay(3000)
    yield put(allPlanetsSuccess())
}