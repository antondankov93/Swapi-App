import {call, delay, put} from 'redux-saga/effects';
import {planetsApi} from "services/axios";
import {SagaIterator} from "@redux-saga/types";
import {allPlanetsSuccess, putAllPlanets} from "components/planets/planetsActions";


const fetchPlanetById = (id: number) => {
    return planetsApi.getPlanet(id)
}

export function* fetchPlanetByIdWorker(arg: any): SagaIterator {

    const planet = yield call(fetchPlanetById, arg.payload)
    yield put(putAllPlanets([planet]))

    yield delay(3000)
    yield put(allPlanetsSuccess())

}