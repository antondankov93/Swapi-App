import {call, put} from 'redux-saga/effects'

import {planetsApi} from "services/axios";
import {fetchNewPlanetsPageSuccess, setPlanetsForPagination} from "components/charts/planets-population/actions";
import {SagaIterator} from "@redux-saga/types";


const fetchPage = (pageNumber: number) => {
    return planetsApi.getAllPlanetsForPagination(pageNumber)
}

export function* planetsPopulationWorker(arg: any): SagaIterator {

    const planetPage = yield call(fetchPage, arg.payload)
    yield put(setPlanetsForPagination(planetPage))

    yield put(fetchNewPlanetsPageSuccess())

}

