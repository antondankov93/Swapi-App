import React from "react";
import s from './planetsPopulation.module.scss'
import {usePlanetPopulation} from "components/charts/planets-population/hooks/usePlanetsPopulation";
import {Button, OverlayTrigger, Pagination, Tooltip} from "react-bootstrap";

export const PlanetsPopulation = () => {

    const {getNextPage, isLoading, currentPage, countAllPlanets, planetsList} = usePlanetPopulation()
    // @ts-ignore
    let pagesCount = Math.ceil(countAllPlanets / planetsList?.length);
    //@ts-ignore
    let pages = [];
    for (let i = 1; i <= pagesCount; i++) {
        pages.push(i);
    }


    return (
        <div className={s.mainWrapper}>
            <section className={s.listWrapper}>
                {planetsList.map((p: { name: React.ReactNode; url: { match: (arg0: RegExp) => number[]; }; }) =>
                    <div className={s.listItem}>
                        <p className={s.listHeader}>
                            <span>{p.name}</span>
                            <OverlayTrigger
                                overlay={
                                    <Tooltip id={`tooltip`}>
                                        add to comparison
                                    </Tooltip>
                                }
                            >
                                <Button size='sm' variant="secondary">&#10010;</Button>
                            </OverlayTrigger>
                        </p>
                        <div className={s.listImage}>
                            <img
                            src={`https://starwars-visualguide.com/assets/img/planets/${p.url.match(/\/([0-9]*)\/$/)[1]}.jpg`}
                            alt=""/>
                        </div>
                    </div>
                )}
            </section>

            <Pagination className={s.paginator} size="sm">
                {pages.map(p =>
                    //@ts-ignore
                    <Pagination.Item className={s.paginatorItem} active={p === currentPage ? currentPage : ''} onClick={() => getNextPage(p)}>
                        {p}
                    </Pagination.Item>)
                }
            </Pagination>
        </div>
    )
}