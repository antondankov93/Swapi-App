import {useDispatch, useSelector} from "react-redux";
import {AppState} from "init/rootReducer";
import {PlanetsPopulationStateType} from "components/charts/planets-comparison/reducer";
import {
    addPlanetForComparison, deleteAllPlanetsForComparison,
    fetchNewPlanetsPageRequest, fetchPlanetDataForComparison,
    removePlanetForComparison
} from "components/charts/planets-comparison/actions";

export const usePlanetPopulation = () => {
    const dispatch = useDispatch()

    const {planetsList, isLoading, currentPage, countAllPlanets,
        planetsForComparison}
    = useSelector<AppState, PlanetsPopulationStateType>(
        state => state.planetsComparisonReducer
    )

    const getNextPage = (pageNumber: number) => {
        dispatch(fetchNewPlanetsPageRequest(pageNumber))
    }
    const addItemToComparison = (id: number) => {
        dispatch(addPlanetForComparison(id))
    }
    const removeItemToComparison = (id: number) => {
        dispatch(removePlanetForComparison(id))
    }
    const deleteAllItemsToComparison = () => {
        dispatch(deleteAllPlanetsForComparison())
    }
    const startComparison = (planets: any) => {
        dispatch(fetchPlanetDataForComparison(planets))
    }

    return{
        planetsList,
        currentPage,
        isLoading,
        countAllPlanets,
        planetsForComparison,
        getNextPage,
        deleteAllItemsToComparison,
        addItemToComparison,
        removeItemToComparison,
        startComparison
    }
}