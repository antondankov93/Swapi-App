import React from "react";
import s from './starshipsComparison.module.scss'
import {Button, OverlayTrigger, Pagination, Tooltip} from "react-bootstrap";
import {useShipsComparison} from "components/charts/starships-comparison/hooks/useShipsComparison";

export const StarshipsComparison = () => {

    const {getNextShipsPage, isLoading, currentPage, countAllShips, shipsList} = useShipsComparison()
    // @ts-ignore
    let pagesCount = Math.ceil(countAllShips / shipsList?.length);
    //@ts-ignore
    let pages = [];
    for (let i = 1; i <= pagesCount; i++) {
        pages.push(i);
    }


    return (
        <div className={s.mainWrapper}>
            <section className={s.listWrapper}>
                {shipsList.map((p: { name: React.ReactNode; url: { match: (arg0: RegExp) => number[]; }; }) =>
                    <div className={s.listItem}>
                        <p className={s.listHeader}>
                            <span>{p.name}</span>
                            <OverlayTrigger
                                overlay={
                                    <Tooltip id={`tooltip`}>
                                        add to comparison
                                    </Tooltip>
                                }
                            >
                                <Button size='sm' variant="secondary">&#10010;</Button>
                            </OverlayTrigger>
                        </p>
                        <div className={s.listImage}>
                            <img
                                src={`https://starwars-visualguide.com/assets/img/starships/${p.url.match(/\/([0-9]*)\/$/)[1]}.jpg`}
                                alt=""/>
                        </div>
                    </div>
                )}
            </section>

            <Pagination className={s.paginator} size="sm">
                {pages.map(p =>
                    //@ts-ignore
                    <Pagination.Item className={s.paginatorItem} active={p === currentPage ? currentPage : ''} onClick={() => getNextShipsPage(p)}>
                        {p}
                    </Pagination.Item>)
                }
            </Pagination>
        </div>
    )
}