import {useDispatch, useSelector} from "react-redux";
import {AppState} from "init/rootReducer";
import {ShipsComparisonStateType} from "components/charts/starships-comparison/reducer";
import {
    addShipForComparison,
    deleteAllShipsForComparison,
    fetchNewShipsPageRequest,
    fetchShipsDataForComparison,
    removeShipForComparison
} from "components/charts/starships-comparison/actions";

export const useShipsComparison = () => {
    const dispatch = useDispatch()

    const {currentPage, shipsList, isLoading, countAllShips, shipsForComparison} = useSelector<AppState, ShipsComparisonStateType>(
        state => state.shipsComparisonReducer
    )

    const getNextShipsPage = (pageNumber: number) => {
        dispatch(fetchNewShipsPageRequest(pageNumber))
    }

    const addItemToComparison = (id: number) => {
        dispatch(addShipForComparison(id))
    }
    const removeItemToComparison = (id: number) => {
        dispatch(removeShipForComparison(id))
    }
    const deleteAllItemsToComparison = () => {
        dispatch(deleteAllShipsForComparison())
    }
    const startComparison = (planets: any) => {
        dispatch(fetchShipsDataForComparison(planets))
    }

    return {
        currentPage,
        shipsForComparison,
        shipsList,
        isLoading,
        countAllShips,
        getNextShipsPage,
        addItemToComparison,
        removeItemToComparison,
        startComparison,
        deleteAllItemsToComparison
    }
}