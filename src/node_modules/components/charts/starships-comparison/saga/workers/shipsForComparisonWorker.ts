import {call, delay, put} from 'redux-saga/effects'

import {starshipsApi} from "services/axios";
import {SagaIterator} from "@redux-saga/types";
import {fetchNewShipsPageSuccess, setShipsForPagination} from "components/charts/starships-comparison/actions";


const fetchPage = (pageNumber: number) => {
    return starshipsApi.getAllShipsForPagination(pageNumber)
}

export function* shipsForComparisonWorker(arg: any): SagaIterator {

    const planetPage = yield call(fetchPage, arg.payload)
    yield put(setShipsForPagination(planetPage))

    yield delay(3000)
    yield put(fetchNewShipsPageSuccess())

}

