import {useDispatch, useSelector} from "react-redux";
import {AppState} from "init/rootReducer";
import {quizStateType} from "components/quiz/quizReducer";
import {useEffect} from "react";
import {SET_NEXT_QUESTION} from "components/quiz/quizTypes";
import {nextQuestion, rightAnswer, wrongAnswer} from "components/quiz/quizActions";


export const useQuize = () => {
    const dispatch = useDispatch()
    const { questionCounter, question, rightAnswers, doneInQuestion} = useSelector<AppState, quizStateType>(
        (state) => state.quizReducer,
    );

    const invokeNewQuestion = () => {
        dispatch(nextQuestion())
    }

    const correctAnswer = (answer:boolean) => {
        if(answer){
            dispatch(rightAnswer())
        }
        else{
            dispatch(wrongAnswer())
        }
    }

    return {
        question,
        questionCounter,
        rightAnswers,
        doneInQuestion,
        invokeNewQuestion,
        correctAnswer
    }
}