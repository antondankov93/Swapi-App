import React from "react";
import s from './questionContainer.module.scss'
import {useQuize} from "components/quiz/hooks/useQuize";
import {Button} from "react-bootstrap";
import {QuizEnd} from "components/quiz/quiz-end/QuizEnd";
import {questionList} from '../questions-for-quiz/questions'


export const QuestionContainer = () => {

    const {question, questionCounter, rightAnswers, doneInQuestion, correctAnswer, invokeNewQuestion} = useQuize()
    const checker = (answer: boolean) => {
        if (!doneInQuestion) {
            correctAnswer(answer)
        }
    }

    return (<>{
            question === undefined
                ?
                //@ts-ignore
                <QuizEnd rightAnswers={rightAnswers}/>
                :
                <div className={s.mainWrapper}>
                    <div className={s.counter}>
                        {`вопрос ${questionCounter} из ${questionList.length}`}
                    </div>
                    <div className={s.counter}>
                        {`правильных ответов ${rightAnswers} из ${questionList.length}`}
                    </div>

                    <h2 className={s.header}>{question.question}</h2>

                    <ul className={s.answerList}>
                        <li onClick={() => checker(question.answer1?.correct)} className={s.answerListItem}>
                            {question.answer1?.text}
                        </li>
                        <li onClick={() => checker(question.answer2?.correct)} className={s.answerListItem}>
                            {question.answer2?.text}
                        </li>
                        <li onClick={() => checker(question.answer3?.correct)} className={s.answerListItem}>
                            {question.answer3?.text}
                        </li>
                        <li onClick={() => checker(question.answer4?.correct)} className={s.answerListItem}>
                            {question.answer4?.text}
                        </li>
                    </ul>
                    {doneInQuestion &&
                    <Button block variant='outline-warning' className={s.button} onClick={invokeNewQuestion}>Next
                        question</Button>}
                </div>}
        </>
    )
}