import {call, put, delay} from 'redux-saga/effects';
import {charactersApi, planetsApi} from "services/axios";
import {SagaIterator} from "@redux-saga/types";
import {allPlanetsSuccess, putAllPlanets} from "components/planets/planetsActions";
import {allCharactersSuccess, putAllCharacters} from "components/characters/charactersActions";


const fetchAllCharacters = () => {
    return charactersApi.getCharactersList()
}

export function* fetchAllCharactersWorker(): SagaIterator {

    const charactersList = yield call(fetchAllCharacters)
    yield put(putAllCharacters(charactersList.results))

    yield delay(3000)
    yield put(allCharactersSuccess())
}