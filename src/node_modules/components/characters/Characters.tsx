import React from "react";
import s from './characters.module.scss'
import {Button, Carousel} from "react-bootstrap";
import cn from 'classnames';
import {NavLink} from "react-router-dom";
import {useCharactersFetch} from "components/characters/hooks/useCharactersFetch";
import {Loader} from "components/loader/Loader";

export const Characters = () => {
    const {allCharacters, isLoading, getFilmById, getPlanetById} = useCharactersFetch()


    return (
        <div className={s.mainWrapper}>
            {isLoading
                ?
                <Loader/>
                :
                <Carousel>
                    // @ts-ignore
                    {allCharacters.map(cr =>
                        <Carousel.Item>
                            <div className={s.mainContent}>
                                <aside className={cn(s.characterInfo, s.left)}>
                                    <p><span>name:</span> {cr.name}</p>
                                    <p><span>gender:</span> {cr.gender}</p>
                                    <p><span>birth year:</span> {cr.birth_year}</p>
                                    <p><span>height:</span> {cr.height}</p>
                                    <p><span>mass:</span> {cr.mass}</p>
                                    <p><span>eye color:</span> {cr.eye_color}</p>
                                </aside>
                                <img
                                    className={s.image}
                                    src={`https://starwars-visualguide.com/assets/img/characters/${allCharacters.indexOf(cr) + 1}.jpg`}
                                />
                                <aside className={cn(s.characterInfo, s.right)}>
                                    <p><span>home planet:</span>
                                        <NavLink
                                            //@ts-ignore
                                            onClick={() => getPlanetById(cr.homeworld.slice(-2, -1))} to='/world/planets'>Planet
                                            № {cr.homeworld.slice(-2, -1)}</NavLink>
                                    </p>
                                    <div className={s.films}>
                                        <h4>Was in the:</h4>
                                        {cr.films.map((cr: string | any[]) =>
                                            <NavLink to='/world/films'
                                                //@ts-ignore
                                                     onClick={() => getFilmById(cr.slice(-2, -1))}>Movie
                                                № {cr.slice(-2, -1)}</NavLink>)}
                                    </div>
                                </aside>
                            </div>
                            <Carousel.Caption>
                                <h3>{cr.name}</h3>
                                <Button
                                    variant="outline-secondary"
                                    size='sm'
                                >Add to favorite</Button>
                            </Carousel.Caption>
                        </Carousel.Item>
                    )}
                </Carousel>}
        </div>
    )
}