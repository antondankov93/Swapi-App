import {call, delay, put} from 'redux-saga/effects';
import {filmsApi} from "services/axios";
import {allFilmsSuccess, putAllFilms} from "components/films/filmsActions";
import {SagaIterator} from "@redux-saga/types";


const fetchFilmById = (id:number) => {
   return filmsApi.getFilm(id)
}

export function* fetchFilmByIdWorker(arg:any): SagaIterator {
    // @ts-ignore
    const film = yield call(fetchFilmById, arg.payload)
    yield put(putAllFilms([film]))

    yield delay(3000)
    yield put(allFilmsSuccess())
}