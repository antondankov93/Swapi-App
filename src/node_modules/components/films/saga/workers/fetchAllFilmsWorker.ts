import {call, put, take} from 'redux-saga/effects';
import {filmsApi} from "services/axios";
import {allFilmsRequested, allFilmsSuccess, putAllFilms} from "components/films/flmsActions";
import {SagaIterator} from "@redux-saga/types";
import {FETCH_ALL_FILMS_REQUEST} from "components/films/filmsTypes";

const fetchAllFilms = () => {
    return filmsApi.getFilmsList()
}

export function* fetchAllFilmsWorker(): SagaIterator {

    const filmsList = yield call(fetchAllFilms)
    yield put(putAllFilms(filmsList.results))

    yield put(allFilmsSuccess())


}