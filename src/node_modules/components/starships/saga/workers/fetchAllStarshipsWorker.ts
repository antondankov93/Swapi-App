import {call, put} from 'redux-saga/effects';
import {starshipsApi} from "services/axios";
import {SagaIterator} from "@redux-saga/types";
import {allStarshipsSuccess, putAllStarships} from "components/starships/starshipsActions";

const fetchAllStarships = () => {
    return starshipsApi.getStarshipsList()
}

export function* fetchAllStarshipsWorker(): SagaIterator {

    const starshipsList = yield call(fetchAllStarships)
    yield put(putAllStarships(starshipsList.results))

    yield put(allStarshipsSuccess())
}